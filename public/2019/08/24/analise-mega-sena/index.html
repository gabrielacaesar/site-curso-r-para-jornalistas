<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.58.2" />
    <meta name="description" content="Curso de R para jornalistas">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Análise - Mega Sena :: Curso de R para jornalistas</title>

    
    <link href="/css/nucleus.css?1569161651" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1569161651" rel="stylesheet">
    <link href="/css/hybrid.css?1569161651" rel="stylesheet">
    <link href="/css/featherlight.min.css?1569161651" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1569161651" rel="stylesheet">
    <link href="/css/auto-complete.css?1569161651" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1569161651" rel="stylesheet">
    <link href="/css/theme.css?1569161651" rel="stylesheet">
    <link href="/css/hugo-theme.css?1569161651" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1569161651"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/2019/08/24/analise-mega-sena/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
<img src="https://github.com/gabrielacaesar/site-curso-r-para-jornalistas/raw/master/static/img/icon-512.png" max-width="50%">
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1569161651"></script>
<script type="text/javascript" src="/js/auto-complete.js?1569161651"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1569161651"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/post/" title="Posts" class="dd-item 
        parent
        
        
        ">
      <a href="/post/">
          Posts
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/2019/08/08/instalacao-r-e-rstudio/" title="Instalação do R e do RStudio" class="dd-item ">
        <a href="/2019/08/08/instalacao-r-e-rstudio/">
        Instalação do R e do RStudio
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2019/08/20/importacao-de-arquivos/" title="Importação de arquivos" class="dd-item ">
        <a href="/2019/08/20/importacao-de-arquivos/">
        Importação de arquivos
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2019/08/20/verificacao-de-arquivo/" title="Verificação de arquivo" class="dd-item ">
        <a href="/2019/08/20/verificacao-de-arquivo/">
        Verificação de arquivo
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2019/08/24/analise-twitter-bolsonaro/" title="Análise - Twitter Bolsonaro" class="dd-item ">
        <a href="/2019/08/24/analise-twitter-bolsonaro/">
        Análise - Twitter Bolsonaro
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2019/08/24/analise-mega-sena/" title="Análise - Mega Sena" class="dd-item active">
        <a href="/2019/08/24/analise-mega-sena/">
        Análise - Mega Sena
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2019/08/24/analise-eleicoes-2016/" title="Análise - Eleições 2016" class="dd-item ">
        <a href="/2019/08/24/analise-eleicoes-2016/">
        Análise - Eleições 2016
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2019/08/24/analise-voos-fab/" title="Análise - Voos FAB" class="dd-item ">
        <a href="/2019/08/24/analise-voos-fab/">
        Análise - Voos FAB
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2019/08/20/saiba-mais-sobre-o-r/" title="Saiba mais sobre o R" class="dd-item ">
        <a href="/2019/08/20/saiba-mais-sobre-o-r/">
        Saiba mais sobre o R
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/2016/12/30/a-plain-markdown-post/" title="A Plain Markdown Post" class="dd-item ">
        <a href="/2016/12/30/a-plain-markdown-post/">
        A Plain Markdown Post
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/1/01/01/" title="" class="dd-item ">
        <a href="/1/01/01/">
        
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/1/01/01/" title="" class="dd-item ">
        <a href="/1/01/01/">
        
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Faça o <a href="https://github.com/gabrielacaesar/curso-r-para-jornalistas" target="_blank">download dos códigos</a></p>
<p></p>
<p>Criado por Gabriela Caesar</p>
<p></p>
<p></p>
<p>Última atualização em 18/09/2019</p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Curso de R para jornalistas</a> > <a href='/post/'>Posts</a> > Análise - Mega Sena
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#instalar-as-bibliotecas">instalar as bibliotecas</a></li>
<li><a href="#carregar-as-bibliotecas">carregar as bibliotecas</a></li>
<li><a href="#baixar-os-dados">baixar os dados</a></li>
<li><a href="#definir-o-diretório-pasta">definir o diretório/pasta</a></li>
<li><a href="#ler-o-arquivo">ler o arquivo</a></li>
<li><a href="#quando-foi-o-primeiro-sorteiro-do-nosso-arquivo">quando foi o primeiro sorteiro do nosso arquivo?</a></li>
<li><a href="#quando-foi-o-último-sorteio-do-nosso-arquivo">quando foi o último sorteio do nosso arquivo?</a></li>
<li><a href="#em-qual-concurso-mais-pessoas-foram-premiadas">em qual concurso mais pessoas foram premiadas?</a></li>
<li><a href="#quantas-vezes-a-mega-sena-acumulou">quantas vezes a mega-sena acumulou?</a></li>
<li><a href="#ver-quais-foram-números-mais-sorteados-na-primeira-bola">ver quais foram números mais sorteados na primeira bola</a></li>
<li><a href="#ver-quais-foram-números-mais-sorteados-na-segunda-bola">ver quais foram números mais sorteados na segunda bola</a></li>
<li><a href="#ver-quais-foram-números-mais-sorteados-na-terceira-bola">ver quais foram números mais sorteados na terceira bola</a></li>
<li><a href="#ver-quais-foram-números-mais-sorteados-na-quarta-bola">ver quais foram números mais sorteados na quarta bola</a></li>
<li><a href="#ver-quais-foram-números-mais-sorteados-na-quinta-bola">ver quais foram números mais sorteados na quinta bola</a></li>
<li><a href="#ver-quais-foram-números-mais-sorteados-na-sexta-bola">ver quais foram números mais sorteados na sexta bola</a></li>
<li><a href="#empilhar-todos-os-arquivos-acima">empilhar todos os arquivos acima</a></li>
<li><a href="#agrupar-por-número-sorteado-e-somar-a-frequência">agrupar por número sorteado e somar a frequência</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/r">r</a>

  <a class="tag-link" href="/tags/rstudio">rstudio</a>

  <a class="tag-link" href="/tags/openxlx">openxlx</a>

  <a class="tag-link" href="/tags/base">base</a>

  <a class="tag-link" href="/tags/tidyverse">tidyverse</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Análise - Mega Sena
            </h1>
          

        





<h4 id="instalar-as-bibliotecas">instalar as bibliotecas</h4>

<p>Caso você ainda não tenha instalado os pacotes abaixo, você precisa rodar esse código abaixo, que usa a função <code>install.packages()</code>.</p>

<pre><code class="language-r">install.packages(&quot;tidyverse&quot;)
install.packages(&quot;openxlsx&quot;)
</code></pre>

<h4 id="carregar-as-bibliotecas">carregar as bibliotecas</h4>

<p>Em seguida, precisamos carregar os pacotes que serão usados na análise com a função <code>library()</code>.</p>

<pre><code class="language-r">library(tidyverse)
library(openxlsx)
</code></pre>

<h4 id="baixar-os-dados">baixar os dados</h4>

<p>link para o download: <a href="http://www1.caixa.gov.br/loterias/_arquivos/loterias/D_megase.zip">http://www1.caixa.gov.br/loterias/_arquivos/loterias/D_megase.zip</a><br />
converter os dados em algum site para CSV ou Excel<br />
como este: <a href="http://www.convertcsv.com/html-table-to-csv.htm">http://www.convertcsv.com/html-table-to-csv.htm</a><br />
abrir no Excel para deletar erros, como linhas apenas com o nome da UF</p>

<h4 id="definir-o-diretório-pasta">definir o diretório/pasta</h4>

<p>Para importar o arquivo do TSE, informamos onde está o arquivo. Neste caso, o arquivo está na pasta “Downloads”.</p>

<p>Isso vai de computador para computador. O arquivo XLSX está na pasta &ldquo;Downloads&rdquo;.</p>

<pre><code class="language-r">setwd(&quot;~/Downloads/&quot;)
</code></pre>

<h4 id="ler-o-arquivo">ler o arquivo</h4>

<p>Importamos o nosso arquivo XLSX.</p>

<pre><code class="language-r">megasena &lt;- read.xlsx(&quot;megasena.xlsx&quot;)
</code></pre>

<h4 id="quando-foi-o-primeiro-sorteiro-do-nosso-arquivo">quando foi o primeiro sorteiro do nosso arquivo?</h4>

<p>Criamos um novo arquivo chamado &ldquo;megasena_df&rdquo;, criado com base no arquivo &ldquo;megasena&rdquo;. Logo depois, usamos a função <code>separate()</code> para separar o conteúdo da coluna &ldquo;Data.Sorteio&rdquo; em mais colunas, considerando o separador &ldquo;/&rdquo;.</p>

<p>As novas colunas criadas recebem os nomes de &ldquo;dia&rdquo;, &ldquo;mes&rdquo; e &ldquo;ano&rdquo;. Como queremos manter a coluna &ldquo;Data.Sorteio&rdquo; também em seu formato original, nós adicionamos &ldquo;remove = FALSE&rdquo;.</p>

<p>Por fim, usamos o <code>arrange()</code> para ordenar os dados considerando as colunas &ldquo;mes&rdquo; e &ldquo;ano&rdquo;.</p>

<pre><code class="language-r">megasena_df &lt;- megasena %&gt;%
  separate(Data.Sorteio, c(&quot;dia&quot;, &quot;mes&quot;, &quot;ano&quot;), sep = &quot;/&quot;, remove = FALSE) %&gt;%
  arrange(mes, ano)
</code></pre>

<h4 id="quando-foi-o-último-sorteio-do-nosso-arquivo">quando foi o último sorteio do nosso arquivo?</h4>

<p>Agora apenas reordenamos o arquivo em ordem decrescente, considerando a coluna &ldquo;ano&rdquo;.</p>

<pre><code class="language-r">megasena_df &lt;- megasena_df %&gt;%
  arrange(desc(ano))
</code></pre>

<h4 id="em-qual-concurso-mais-pessoas-foram-premiadas">em qual concurso mais pessoas foram premiadas?</h4>

<p>Desta vez, queremos transformar os dados da coluna &ldquo;Ganhadores_Sena&rdquo; em número e usamos as funções <code>mutate()</code> e <code>as.numeric()</code>. Depois também reordenamos com <code>arrange()</code> e <code>desc()</code>.</p>

<pre><code class="language-r">megasena_df &lt;- megasena_df %&gt;%
  mutate(Ganhadores_Sena = as.numeric(Ganhadores_Sena)) %&gt;%
  arrange(desc(Ganhadores_Sena))
</code></pre>

<h4 id="quantas-vezes-a-mega-sena-acumulou">quantas vezes a mega-sena acumulou?</h4>

<p>Para descobrirmos quantas vezes a Mega Sena acumulou, nós vamos agrupar os dados considerando a coluna &ldquo;Acumulado&rdquo;, com a função <code>group_by()</code>. Também queremos contar quantas linhas aparecem em cada variável da coluna &ldquo;Acumulado&rdquo; e, por isso, usamos também <code>summarise()</code> e <code>n()</code>.</p>

<pre><code class="language-r">megasena_acumulada &lt;- megasena_df %&gt;%
  group_by(Acumulado) %&gt;%
  summarise(int = n())
</code></pre>

<h4 id="ver-quais-foram-números-mais-sorteados-na-primeira-bola">ver quais foram números mais sorteados na primeira bola</h4>

<p>A partir de agora, começamos a missão para descobrir quais foram os números mais sorteados nos concursos da Mega Sena. Vamos agrupar os dados apenas da coluna &ldquo;1ª.Dezena&rdquo;, que tem os primeiros números sorteados em cada concurso. Depois, vamos contar quantas vezes cada número apareceu. E depois vamos renomear a coluna para &ldquo;n_sorteado&rdquo;.</p>

<pre><code class="language-r">megasena_frequentes_1d &lt;- megasena_df %&gt;%
  group_by(`1ª.Dezena`) %&gt;%
  summarise(int = n()) %&gt;%
  rename(n_sorteado = `1ª.Dezena`)
</code></pre>

<h4 id="ver-quais-foram-números-mais-sorteados-na-segunda-bola">ver quais foram números mais sorteados na segunda bola</h4>

<p>Faremos o mesmo procedimento anterior, só que com as demais colunas. Ou seja, com os dados da segunda bola sorteada. Depois, com os dados da terceira bola sorteada, da quarta bola sorteada etc.</p>

<pre><code class="language-r">megasena_frequentes_2d &lt;- megasena_df %&gt;%
  group_by(`2ª.Dezena`) %&gt;%
  summarise(int = n()) %&gt;%
  rename(n_sorteado = `2ª.Dezena`)
</code></pre>

<h4 id="ver-quais-foram-números-mais-sorteados-na-terceira-bola">ver quais foram números mais sorteados na terceira bola</h4>

<pre><code class="language-r">megasena_frequentes_3d &lt;- megasena_df %&gt;%
  group_by(`3ª.Dezena`) %&gt;%
  summarise(int = n()) %&gt;%
  rename(n_sorteado = `3ª.Dezena`)
</code></pre>

<h4 id="ver-quais-foram-números-mais-sorteados-na-quarta-bola">ver quais foram números mais sorteados na quarta bola</h4>

<pre><code class="language-r">megasena_frequentes_4d &lt;- megasena_df %&gt;%
  group_by(`4ª.Dezena`) %&gt;%
  summarise(int = n()) %&gt;%
  rename(n_sorteado = `4ª.Dezena`)
</code></pre>

<h4 id="ver-quais-foram-números-mais-sorteados-na-quinta-bola">ver quais foram números mais sorteados na quinta bola</h4>

<pre><code class="language-r">megasena_frequentes_5d &lt;- megasena_df %&gt;%
  group_by(`5ª.Dezena`) %&gt;%
  summarise(int = n()) %&gt;%
  rename(n_sorteado = `5ª.Dezena`)
</code></pre>

<h4 id="ver-quais-foram-números-mais-sorteados-na-sexta-bola">ver quais foram números mais sorteados na sexta bola</h4>

<pre><code class="language-r">megasena_frequentes_6d &lt;- megasena_df %&gt;%
  group_by(`6ª.Dezena`) %&gt;%
  summarise(int = n()) %&gt;%
  rename(n_sorteado = `6ª.Dezena`)
</code></pre>

<h4 id="empilhar-todos-os-arquivos-acima">empilhar todos os arquivos acima</h4>

<p>Agora que nós já temos os números mais frequentes sorteados na primeira, na segunda, na terceira, na quarta, na quinta e na sexta bola do concurso. Os cabeçalhos desses arquivos são iguais. E agora vamos empilhar esses arquivos com a função <code>rbind()</code>.</p>

<pre><code class="language-r">megasena_frequentes &lt;- rbind(megasena_frequentes_1d, 
                             megasena_frequentes_2d, 
                             megasena_frequentes_3d, 
                             megasena_frequentes_4d,
                             megasena_frequentes_5d, 
                             megasena_frequentes_6d)
</code></pre>

<h4 id="agrupar-por-número-sorteado-e-somar-a-frequência">agrupar por número sorteado e somar a frequência</h4>

<p>O nosso novo arquivo tem os dados de números mais frequentes em cada bola. Mas queremos saber no geral quais foram os números mais frequentes. Por isso, vamos agrupar os dados novamente, com a função <code>group_by()</code>.</p>

<p>Depois, usamos ainda <code>summarise()</code> e <code>sum()</code>. Usamos aqui o <code>sum()</code> porque queremos somar os valores da coluna int, e não apenas contar o número de linhas. Depois, reordenamos os dados, com a função <code>arrange()</code>, para mostrar em ordem decrescente, com a função <code>desc()</code>.</p>

<pre><code class="language-r">megasena_frequentes &lt;- megasena_frequentes %&gt;%
  group_by(n_sorteado) %&gt;%
  summarise(int = sum(int)) %&gt;%
  arrange(desc(int))
</code></pre>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/2019/08/24/analise-twitter-bolsonaro/" title="Análise - Twitter Bolsonaro"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/2019/08/24/analise-eleicoes-2016/" title="Análise - Eleições 2016" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1569161651"></script>
    <script src="/js/perfect-scrollbar.min.js?1569161651"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1569161651"></script>
    <script src="/js/jquery.sticky.js?1569161651"></script>
    <script src="/js/featherlight.min.js?1569161651"></script>
    <script src="/js/html5shiv-printshiv.min.js?1569161651"></script>
    <script src="/js/highlight.pack.js?1569161651"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1569161651"></script>
    <script src="/js/learn.js?1569161651"></script>
    <script src="/js/hugo-learn.js?1569161651"></script>

    <link href="/mermaid/mermaid.css?1569161651" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1569161651"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

